webpackJsonp([0],{174:function(t,i,e){"use strict";function a(t){e(187)}Object.defineProperty(i,"__esModule",{value:!0});var n=e(179),o=e(183),r=e(72),s=a,l=r(n.a,o.a,!1,s,null,null);i.default=l.exports},175:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAB7FBMVEVHcEzqxRjmz2TfymLjxDbpwhPgwkThxDnYswTqxA/gyFnnxB/dxVTpz1vmzFnZtxjgxlPixTzgx1fhxD/gxU3iwzLcux7buyTyyxT/zDPduhfauyThvR3fyF7gxUfoxijixUPmxS/fxk/atw7ryTHvyyHszDfqyjLduhTWswXkymDiyF/cx1vkwybcxlrgxEbixEXhx0vfxlDwzizcvCfcuRzbuBrfwDDduSL/42P90AB6enr0yQCampryxwD4zADuwwDvxQBpaWnwxQHvxAD6zgD7zwD3ywBkZGT2ywD80ADxxwB0dHR5eXlubm5zc3NfX1/1ygBvb2/80QjzyADrwgD5zQD+4VrkvxmfnZKcm5d4eHj92Cz93EH+4FXtxhT92jj+3kjZuibqwgnnwA+moIbdtwP40h7txAXgvRzXuSyupHexmi1wcHCNhmb1ywncuyDsxAzIqh3OtT+1qGqhno23nyvRsRqynT3fuhP91BS+pjOKfUVZWVlbW1vSsybhugfnvgNjY2Oqon/931H40BfwzSS+oyfxyAx+fXfJri+slChgXlV/d1JrZ1mYiUP60RHWuTObjk9yb2Oml1FycWu6ozyHg26XjV7+42F2bkeRgTfCr1PJskrDqjf90gd+dEW+rV3FsFD40x/SsAs5AAAAkXRSTlMA+R003P4U1/79ZPZ/Dgr9h9BwyaHjqpn6BSf7/Uaw7sHomEDF8tje4jUpPFPyXLa8qZDqxcLO2Hj////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+SbvhLAAABDVJREFUeNrF2PlbGkcYB/BFg6ISjffxPDHGNGdz94zOLDMuirgEXYOKFuQUuaoI3kfUaGq8Y+7raZP2H+0sPLYVZtuH1x/6PvBw/PB5vrPzLsOM8B9V+s2jf9bzKwXCaerGla62k9XVcLUQ7hVdNnVmg6bJhq+hXvkFq6mrJwsctD67fBYIXkXWnISdgxbU8BXMOycjxdSZndBkVUTdeRBYJnISsiEjUQJFLJREB+8aMpDqygFgNZW5CS0sIWkGgDrKTWhSExIdoAdJJmEPN+FA/p1TMEBlh8akUBBIJO41ZG2jJryZN1hMzGofdnEmRWZgcd7gGUI1EiIRCEqyQ+H1oQIFqYj4bQMG+bNsUUQKA82ce/n0CTNDntRHnPpnPcd9CE3IZtmyMPti4u12e7q2J17Mz0mWU8zy7vJBd8fPtvbj+qnX3tG9HIfP8t5K30nQxsC+lTkQWBOm4ofHDOz/G3zIEj7pW1mjpOS2kHeVUPljGswact+eLJGyvBc8Y2U4LO4+zhpyOuEHkQYCta1FeYG1A/pwNJJc4SX8KPqjurL1W3mBxvOCPvppLTuhTU24K05HK4VCY95LQHQD7eVMCkuYlIf9lZA1xY+nPmclTIPrEZyohizLCew/zL2GTw5QCkdaIGAEp5IH+4fzO/4Eu5E9+khidWn+cH9Z+YQjdwHgrQj+ov44/Lbocnndbp/P7XW5FtVfm2nsvAMALzjx9KTXN/TgRA35xpUYDjbDwNjTB7nlRWM4eA8AXgziMR7oRjM4UAMDh3mgD43AwNogHhnngJsKxqQVAJ7RAEcRHiH3IWDgX8BzALCYgX9wwCGEh4kRAFZqgzOkCgBWhzXBMRhIU7FxLjgdJaUAsEX6/YgLKkfT5DYAvGuewb/wh4zJTQB4hw4zUKNtIDufZkkDVFjbQPaP9zQSbqptUwgAaxjo4YEKA28AwFYzH/SpfVgAAO/TGewZygXdKlgE2d2ax7BnkwtukHIIKDHQzVkCFAYKgDLSDexxcUCEY2EIWEVj2PP8fU4bPmVgAAKW0tSRFT1yjZ7gXIMOFE1NwUDRUfF2dbJt0eUefZ9ekr2LbfqdiVWRlkDAFiqjd+wPzcSr+V9XE06nf+fNq3fb6heiNFUlgP4SL7Rzq4KSYggoyUsPufVGgoFmeanXZrP19trSL+oj83mJgcAhv7bb7f32/uMHe8+erxck6JAdcy87cuplUgSC6n5Z2lruPlH78SACg5n9cs/U3NbsbDwen91KVqDMfhkGau6X4Qk1z76gbcM/P4QmLJU0zw+li5BFqoBonx9CAgqNAe3zwx8ESFVIWueH5FsQWL8m8g+CpFCTAKrvQ4R3fjhgqBeAVW8ImbPAThIy/CiAq+g7gyG0TpGF3YHs4tH1kMFQd1Y4TTVeqrtm+Kuu1V0CGLykTdevNxU1Cv9H/Qn1RVYqqpd81AAAAABJRU5ErkJggg=="},176:function(t,i,e){"use strict";i.a={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(t){this.$emit("click",t)}}}},179:function(t,i,e){"use strict";var a=e(182),n=e(45),o=e.n(n),r=new o.a.AMapManager;i.a={components:{ElButton:a.a},data:function(){var t=this;return{amapManager:r,pathSimplifierIns:void 0,car:{carNumber:"",online:!1,soc:0,odo:0,acc:!0,charging:!1,ready:!1,door:!1,lock:!0,speed:0,longitude:0,latitude:0,route:void 0,instruction:""},map:{poi:{zoom:15,offset:[-20,-20],events:{dragend:function(i){t.car.longitude=i.lnglat.getLng(),t.car.latitude=i.lnglat.getLat()}}},plugins:[{pName:"ToolBar",liteStyle:!0}],events:{click:function(i){t.directionData.longitude=i.lnglat.getLng(),t.directionData.latitude=i.lnglat.getLat(),t.directionData.visible=!0},init:function(t){}}},directionData:{longitude:0,latitude:0,visible:!1,draw:!1}}},computed:{position:function(){return[this.car.longitude,this.car.latitude]},directionPosition:function(){return[this.directionData.longitude,this.directionData.latitude]}},created:function(){this.loadAmapPath(),this.load(),this.intervalLoad()},beforeDestroy:function(){this.removeIntervalLoad()},methods:{loadAmapPath:function(){var t=this;AMapUI.load(["ui/misc/PathSimplifier"],function(i){if(!i.supportCanvas)return void alert("当前环境不支持 Canvas！");t.initPathSimplifier(i)})},intervalLoad:function(){var t=this;this.intId=setInterval(function(){t.load()},3e4)},removeIntervalLoad:function(){this.intId&&clearInterval(this.intId)},load:function(){var t=this;this.$http.get("/api/info/"+this.$route.params.id).then(function(i){if(0==i.body.code){var e=i.body.data;t.car.id=e.id,t.car.carNumber=e.carNumber,t.car.soc=e.status.soc.toFixed(1),t.car.speed=e.status.speed.toFixed(1),t.car.longitude=e.status.longitude,t.car.latitude=e.status.latitude,t.car.route=e.route,t.car.instruction=e.instruction,t.drawPath()}else t.$alert("车辆数据不存在, 即将跳转回首页","提示",{confirmButtonText:"确定",center:!0,callback:function(i){t.$router.replace("/")}})})},direction:function(){var t=this,i=this,e=this.directionData.longitude,a=this.directionData.latitude;this.$http.post("/api/direction/"+this.$route.params.id+"/to",{longitude:e,latitude:a}).then(function(e){0==e.body.code?(t.$notify({title:"成功",message:"路径规划成功",type:"success"}),i.load()):t.$notify({title:"失败",message:e.body.msg,type:"error"})})},drawPath:function(){if(this.pathSimplifierIns){if(!this.car.route)return this.pathSimplifierIns.setData([]),void(this.directionData.draw=!1);if(!this.directionData.draw){var t=[];this.car.route.steps.forEach(function(i){t.push([i.longitude,i.latitude])}),this.pathSimplifierIns.setData([{name:"路径",path:t}]),this.directionData.draw=!0}}},initPathSimplifier:function(t){this.pathSimplifierIns=new t({zIndex:100,map:r.getMap(),getPath:function(t,i){return t.path},getHoverTitle:function(t,i,e){return e>=0?t.name+"，点:"+e+"/"+t.path.length:t.name+"，点数量"+t.path.length},renderOptions:{pathLineStyle:{strokeStyle:"green",lineWidth:6,dirArrowStyle:!0}}}),this.drawPath()}}}},180:function(t,i,e){i=t.exports=e(44)(void 0),i.push([t.i,".amap-icon img{position:absolute;z-index:-1;width:40px}",""])},182:function(t,i,e){"use strict";var a=e(176),n=e(186),o=e(72),r=o(a.a,n.a,!1,null,null,null);i.a=r.exports},183:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{attrs:{id:"car"}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[t._v("车辆列表")])]),t._v(" "),a("el-breadcrumb-item",[t._v("路径规划")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{"padding-bottom":"20px"}},[a("span",[t._v(t._s(t.car.carNumber)+" - 电量："+t._s(t.car.soc)+"% 车速："+t._s(t.car.speed)+"km/h")]),t._v(" "),a("span",{staticStyle:{float:"right"}},[t._v(t._s(t.car.instruction))])]),t._v(" "),a("el-amap",{staticStyle:{height:"750px",border:"1px solid #ddd"},attrs:{vid:"map",zoom:t.map.poi.zoom,cursor:"point","amap-manager":t.amapManager,center:t.position,plugin:t.map.plugins,events:t.map.events}},[a("el-amap-marker",{attrs:{icon:e(175),offset:t.map.poi.offset,position:t.position,draggable:"true",events:t.map.poi.events}}),t._v(" "),a("el-amap-marker",{attrs:{visible:t.directionData.visible,position:t.directionPosition}})],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[t._v("\n        经度：\n        "),a("el-input",{attrs:{placeholder:"请点击地图选点"},model:{value:t.directionData.longitude,callback:function(i){t.$set(t.directionData,"longitude",i)},expression:"directionData.longitude"}}),t._v("\n        纬度：\n        "),a("el-input",{attrs:{placeholder:""},model:{value:t.directionData.latitude,callback:function(i){t.$set(t.directionData,"latitude",i)},expression:"directionData.latitude"}}),t._v(" "),a("el-button",{on:{click:t.direction}},[t._v("去这里")])],1)],1)},n=[],o={render:a,staticRenderFns:n};i.a=o},186:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("button",{staticClass:"el-button",class:[t.type?"el-button--"+t.type:"",t.buttonSize?"el-button--"+t.buttonSize:"",{"is-disabled":t.buttonDisabled,"is-loading":t.loading,"is-plain":t.plain,"is-round":t.round,"is-circle":t.circle}],attrs:{disabled:t.buttonDisabled||t.loading,autofocus:t.autofocus,type:t.nativeType},on:{click:t.handleClick}},[t.loading?e("i",{staticClass:"el-icon-loading"}):t._e(),t._v(" "),t.icon&&!t.loading?e("i",{class:t.icon}):t._e(),t._v(" "),t.$slots.default?e("span",[t._t("default")],2):t._e()])},n=[],o={render:a,staticRenderFns:n};i.a=o},187:function(t,i,e){var a=e(180);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(73)("48ae2f5c",a,!0,{})}});
//# sourceMappingURL=0.js.map?b1b60b99a83a6c0d28b2